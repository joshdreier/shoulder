var THIV=THIV||{},animationSpeed=250;document.body.className+=" js-enabled",document.addEventListener("keydown",function(e){9===e.keyCode&&jQuery("html").addClass("keyboard-user")}),document.addEventListener("mousedown",function(e){jQuery("html").removeClass("keyboard-user")}),THIV.mainMenu=function(e){function t(){function t(){window.matchMedia("(min-width:1024px)").matches?(a.on("mouseenter",function(){e(this).find("> .menu").addClass("active")}),a.on("mouseleave",function(){e(this).find("> .menu").removeClass("active")})):a.off("mouseenter mouseleave")}var n=e("#top-menu"),a=n.find(".menu-block-wrapper > .menu > li:not(:first-child)");a.each(function(){var t=e(this).find("> a").text();e(this).append('<button class="toggle" aria-expanded="false"><span>Display</span> '+t+" menu</button>")}),a.find("button").on("click",function(){var t=e(this).siblings(".menu");t.is(".active")?(e(this).attr("aria-expanded","false").find("span").text("Display"),t.removeClass("active")):(e(this).attr("aria-expanded","true").find("span").text("Hide"),t.addClass("active").find("> li:first-child > a").focus())}),e(window).on("resize",function(){t()}),t()}e("#top-menu").length&&t()}(jQuery),THIV.mobileMainMenu=function(e){function t(){var t=e(".hamburger-menu");t.on("click",function(t){t.preventDefault(),e(this).is(".active")?(e(this).removeClass("active").attr("aria-expanded","false"),e("body").removeClass("mobile-nav-open")):(e(this).addClass("active").attr("aria-expanded","true"),e("body").addClass("mobile-nav-open"),e("body").is(".search-bar-open")&&(e(".search-toggle").removeClass("active").attr("aria-expanded","false"),e("body").removeClass("search-bar-open")))})}e(".hamburger-menu").length&&t()}(jQuery),THIV.mobileSearchMenu=function(e){function t(){var t=e(".search-toggle"),n=e("#block-apachesolr-panels-search-form"),a=n.find("input[type=text]");a.attr("placeholder","Search"),t.on("click",function(t){t.preventDefault(),e(this).is(".active")?(e(this).removeClass("active").attr("aria-expanded","false"),e("body").removeClass("search-bar-open")):(e(this).addClass("active").attr("aria-expanded","true"),e("body").addClass("search-bar-open"),a.focus())})}e(".search-toggle").length&&t()}(jQuery),THIV.setStickyNav=function(e){function t(){e(window).scrollTop()>=e("header#header #branding").outerHeight()+e("#console").outerHeight()?(e("#top-menu").addClass("fixed"),e("body").addClass("fixed-nav")):(e("#top-menu").removeClass("fixed"),e("body").removeClass("fixed-nav"))}window.matchMedia("(min-width:1024px)").matches&&(e("#top-menu").length&&t(),e(window).on("scroll",t),e(window).on("resize",function(){Modernizr.pointerevents&&t()}))}(jQuery),THIV.accordion=function(e){function t(){var t=e("button.accordionnew");t.parent().is("p")&&t.unwrap(),t.on("click",function(t){e(this).is(".active")?(e(this).removeClass("active").attr("aria-expanded","false"),e(this).next(".accordionpanel").slideUp(animationSpeed)):(e(this).addClass("active").attr("aria-expanded","true"),e(this).next(".accordionpanel").slideDown(animationSpeed))})}e("button.accordionnew").length&&t()}(jQuery),THIV.libraryAccordion=function(e){function t(){var t=e(".accordion-item");e(".library-landing .accordion-item").each(function(){e(this).prepend('<button class="toggle" aria-expanded="false">Toggle Menu</button>')}),e(".ta-accordion .item-list > h3").wrap('<button class="toggle accordionnew" aria-expanded="false"></button>'),e(document).on("click",".toggle",function(){e(this).is(".active")?(e(this).removeClass("active").attr("aria-expanded","false"),e(this).siblings("ul").slideUp(animationSpeed)):(e(this).addClass("active").attr("aria-expanded","true"),e(this).siblings("ul").slideDown(animationSpeed))}).on("click",".expand-all",function(){e(this).is(".active")?(e(this).text("+ Expand all").removeClass("active").attr("aria-expanded","false"),t.each(function(){e(this).find(".toggle").removeClass("active").attr("aria-expanded","false"),e(this).find("ul").slideUp(animationSpeed)})):(e(this).text("- Collapse all").addClass("active").attr("aria-expanded","true"),t.each(function(){e(this).find(".toggle").addClass("active").attr("aria-expanded","true"),e(this).find("ul").slideDown(animationSpeed)}))})}e(".library-landing, .ta-accordion").length&&t()}(jQuery),THIV.calendar=function(e){function t(){$calContainer=e(".view-calendar"),$calFilters=$calContainer.find(".view-filters"),$calFilters.find(".element-hidden").length&&$calFilters.hide()}e(".view-calendar").length&&t()}(jQuery),THIV.twitter=function(e){function t(){$twitterFeed=e(".twitter-feed"),$twitterFeed.find(".title").append('<div class="more-link"><a href="https://twitter.com/ryanwhitecare" target="_blank">View more</a><div>')}e(".twitter-feed").length&&t()}(jQuery),THIV.respsonsiveTables=function(e){function t(){var t=e(".content-main table");t.each(function(){var t=[],n=e(this).find("tr:first-child td, tr:first-child th"),a=e(this).find("tr");n.each(function(n){t.push(e(this).text().trim())}),a.each(function(){e(this).find("td").each(function(n){e(this).attr("data-label",t[n])})})})}e(".content-main table").length&&t()}(jQuery),THIV.leafletMap=function(e){function t(){e("#leaflet-map").find("img:not([alt])").each(function(){e(this).attr("alt",e(this).attr("title"))})}e("#leaflet-map").length&&setTimeout(function(){t()},1e3)}(jQuery),THIV.readMore=function(e){function t(){var t=e(".more-link, .homepage-hero-link");t.each(function(){var t=e(this).siblings("h1, h2, h3, h4, h5, h6");!t.length>0&&(t=e(this).parent().siblings("h1, h2, h3, h4, h5, h6")),!t.length>0&&(t=e(this).parent().siblings().find("h1, h2, h3, h4, h5, h6")),!t.length>0&&(t=e(this).parents(".panel-pane").find("h1, h2, h3, h4, h5, h6")),!t.length>0&&(t=e(this).siblings().find("h1, h2, h3, h4, h5, h6"));var n=t.eq(0).text(),a=e(this).find("a"),i=a.clone().children().remove().end().text(),o=" about ",r=i+o+n;a.attr("aria-label",r)}),e(".homepage-hero-image").length&&e(".homepage-hero-image").find("a").attr({"aria-hidden":"true",tabindex:"-1"})}e(".more-link").length&&setTimeout(function(){t()},50)}(jQuery),THIV.programDB=function(e){function t(){$programDownload=e(".program-db-download"),$orgsView=e(".view-organizations"),$orgsView.find(".view-empty").length&&$programDownload.hide()}e(".program-db-download").length&&t()}(jQuery),THIV.emptyButtons=function(e){function t(){$buttonText=e(".button-container").find("span").first(),""==e.trim($buttonText.html())&&$buttonText.html("Visit Website")}e(".button-container").length&&t()}(jQuery);